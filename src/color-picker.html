<!-- Import Polymer -->
<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/paper-canvas/dist/paper-canvas.html">

<!-- Define your custom element -->
<polymer-element name="color-picker" attributes="label color primary secundary">

	<template>
		<span id="label">{{label}}</span>
		<div id="colorPickerGroup">
			<label for="p" class="{{pClass}}" id="lp" style="background-color:{{p}}"></label>
			<input type="color" id="p" value="{{p}}">
			<label for="s" class="{{sClass}}" id="ls" style="background-color:{{s}}"></label>
			<input type="color" id="s" value="{{s}}">
		</div>
		<style>
			:host{
				display: inline-block;
			}
			:host(.shadow) label{
				box-shadow:1px 1px 1px #666;
			}
			:host(.square.shadow) label{
				box-shadow:1px 1px 0 #666;
			}
			:host(.square) label{
				border-radius: 0;
			}
			:host(.square) #lp{
				margin-top:-5px;
			}
			:host(.square) #ls{
				margin-top: 5px;
			}
			:host(.horizontal) #label{
				display: inline-block;
			}
			:host(.horizontal, .vertical) #label:after{
				content: ":";
				margin-left: 5px;
			}
			:host(.vertical) #label{
				display: block;
				clear: both;
			}
			:host>div{
				width:35px;
				height:22px;
				position: relative;
			}
			#colorPickerGroup{
				position: relative;
				display: inline-block;
			}
			label{
				position: absolute;
				display: block;
				width:20px;
				height:20px;
				border-radius: 100%;
				border: 1px solid rgba(0,0,0,0.2);
				float:left;
				top:0;
				transition: opacity 200ms linear;
				cursor: pointer;
			}
			label:hover{
				opacity: .7;
			}
			#lp{
				left:0;
			}
			#ls{
				right:0;
			}
			.primary{
				z-index:1;
			}
			.secundary{
				z-index:0;
			}
			[type=color]{
				visibility: hidden;
				width:0;
				height:0;
				border: 0;
				padding: 0;
			}
		</style>
	</template>
	<script src="../bower_components/color2color/dist/color2color.min.js"></script>
	<script>
		Polymer('color-picker', {
			p:'#000000',
			s:'#FFFFFF',
			primary : '',
			secundary : '',
			primaryColor : 'p',
			secundaryColor : 's',
			pClass:'primary',
			cClass:'secundary',
			observe:{
				p: 'digest',
				s: 'digest'
			},
			attached: function(){
				this.digest();
			},
			switchColor: function(){
				var transitional = this.pClass;

				this.pClass = this.sClass;
				this.sClass = transitional;

				transitional = this.primaryColor;

				this.primaryColor = this.secundaryColor;
				this.secundaryColor = transitional;

				this.digest();
			},
			digest:function(){
				p = color2color(this.p, 'hex');
				s = color2color(this.s, 'hex');

				this.primary = this[this.primaryColor];
				this.secundary = this[this.secundaryColor];
			}
		});
	</script>
</polymer-element>
